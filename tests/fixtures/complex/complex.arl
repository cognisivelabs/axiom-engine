// Complex Business Rule: Loan Eligibility

// Context:
// user: { credit_score: int, income: int, debts: int[] }
// loan: { amount: int }

let total_debt: int = 0; // We don't have reduce() yet, so we just assume debt is passed as list? 
// Actually we can't sum a list yet! We only have exists/all.
// Let's change the scenario.

// Context:
// user: { 
//    tier: string, 
//    active: bool,
//    orders: { total: int, status: string }[] 
// }

let is_active: bool = user.active;
let is_premium: bool = user.tier == "gold" || user.tier == "platinum";

// Check if user has any recent big orders (simulated by total > 100)
let has_big_order: bool = user.orders.exists(o, o.total > 100);

// Check if all orders are delivered
let all_delivered: bool = user.orders.all(o, o.status == "delivered");

// Eligibility Logic
// Eligibility Logic
let result: bool = false;
if (!is_active) {
    result = false;
} else {
   result = (is_premium && has_big_order) || all_delivered;
}
result
